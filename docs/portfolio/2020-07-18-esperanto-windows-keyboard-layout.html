<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="author" content="ubikium" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="Cache-Control" content="max-age=86400, must-revalidate" />
        <title>Ubikium</title>
        <link rel="stylesheet" type="text/css" title="hakyll_theme" href="../css/theprofessional.css" />
        <link rel="stylesheet" type="text/css" title-"syntax_highlighting" href="../css/monokai.css">
        <script src="../assets/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </head>
    <body>
      <div class="highbar">&nbsp;</div>
        <div id="header">
          <div class="box">
            <div id="logo" class="name">
				<img src="../images/logo-crvdgc.png" class="icon" style="height: 90px;" />
            </div>
            <div id="navigation" class="pageslinks">
              <nav class="menuNav">
                <div class="menuItems">
                <a href="../" class="portfolio/2020-07-18-esperanto-windows-keyboard-layout.md">Home</a>
                <a href="../about.html" class="portfolio/2020-07-18-esperanto-windows-keyboard-layout.md">About</a>
                <a href="../archive.html" class="portfolio/2020-07-18-esperanto-windows-keyboard-layout.md">Portfolio</a>
                </div>
              </nav>
            </div>
        </div>
        </div>
        <div class="container-gallery">
        <div id="content" class="inside">
            <div class="info">
    <h1>Setting up an Esperanto keyboard layout on Windows</h1>
    Posted on July 18, 2020
    
        by ubikium
    
</div>
<hr>

<h2 id="problem">Problem</h2>
<p>Esperanto is an easy to learn language, however, it lacks major support from locale providers. Windows 10 has an Esperanto locale in its language setting, but the locale doesn’t have any actual component (or a <a href="https://support.microsoft.com/en-us/help/14236/windows-language-packs">language pack</a> in the Windows parlance).</p>
<p>One crucial missing part is the ability to type diacritic letters, <code>ŝĝĵĥĉŭ</code>, with the keyboard. Of course you can install an additional input method software, or use a language that already has these letters. But actually it can be done more easily. This post will teach you how.</p>
<h2 id="method">Method</h2>
<p>A keyboard layout is a mapping from keys to characters (or control sequences). We can use a special layout to map some keys to the Unicode characters of special letters (e.g. <code>q</code> → <code>ŝ</code>). The steps are:</p>
<h3 id="install-the-keyboard-layout">1. Install the keyboard layout</h3>
<p>If you’re using an “United States - English” keyboard and <strong>aren’t using the “English (Canada)” locale</strong>, you can download the layout from <a href="https://github.com/gellertb97/eo_US-Windows-Keyboard/">gellertb97/eo_US-Windows-Keyboard</a>. I’ll talk about the case of other keyboards in <a href="#faq">the FAQ section</a>.</p>
<figure>
<img src="https://raw.githubusercontent.com/gellertb97/eo_US-Windows-Keyboard/master/res/eo_US.jpg" alt /><figcaption>Esperanto Keyboard Layout</figcaption>
</figure>
<p>You can learn the mapping from <code>README.md</code>. Follow the instructions in the <code>Install</code> folder, and you can add the keyboard layout to the “English (Canada)” or <code>en_CA</code> locale.</p>
<p>You might need to restart your computer for the keyboard to be available.</p>
<p>You can stop at this point if you want. The problem is that if you have another English keyboard layout, they will both be displayed as an <code>ENG</code> language icon. So you can’t tell which one you are using. We solve this by moving the keyboard to the Esperanto locale.</p>
<h3 id="move-the-layout-to-the-esperanto-locale">2. Move the layout to the Esperanto locale</h3>
<p><code>Start</code> &gt; <code>Settings</code> &gt; <code>Time &amp; Language</code> &gt; <code>Language</code> &gt; <code>Add a language</code>, then search for Esperanto.</p>
<p>Back to <code>Language</code> and select <code>Esperanto</code> &gt; <code>Options</code> &gt; <code>Add a keyboard</code>. Select <code>Esperanto (United States/Canada)</code>.</p>
<h3 id="clean-the-english-canada-locale">3. Clean the “English (Canada)” locale</h3>
<p>In <code>Language</code>, select <code>English (Canada)</code> and delete it.</p>
<p>Now you’re done. Use <code>Alt+Shift</code> (or <code>Win+Space</code>) to switch keyboards. You should see the new layout under the language Esperanto (the icon is <code>EPO</code>).</p>
<p>Enjoy🎉!</p>
<h2 id="customization">Customization</h2>
<p>As is explained in the <code>README.md</code>, the layout is created with the <a href="https://www.microsoft.com/en-us/download/details.aspx?id=22339">Microsoft Keyboard Layout Creator</a> (MKLC). The layout source file is available at <code>src/eo_US.klc</code>. You can install MKLC and open the <code>klc</code> file for further customization.</p>
<p>When done configuring, use <code>Project</code> &gt; <code>Build DLL and Setup Package</code> to validate and build the layout. The setup package will be built under your <code>Current working directory</code> folder. You can install it or distribute it.</p>
<p>Sometimes, MLKC will complain that the keyboard is already in use on this machine. Or when installing, it says the <code>eo_US.dll</code> is already in the system folder. You need to first uninstall the keyboard and the DLL. Then build and install again. See the <a href="#faq">FAQ section</a>.</p>
<h2 id="faq">FAQ</h2>
<h3 id="why-not-install-to-the-esperanto-locale-in-the-first-place">Why not install to the Esperanto locale in the first place</h3>
<p>The <a href="#customization">MKLC tool</a> doesn’t have Esperanto as an available locale option. So we have to first install the keyboard under a different language and then move it to Esperanto.</p>
<h3 id="i-already-use-the-english-canada-locale-and-cannot-delete-the-keyboard">I already use the “English (Canada)” locale and cannot delete the keyboard</h3>
<p>If you have already added the keyboard to “English (Canada)”. The custom keyboard’s <code>Delete</code> option might be grayed out. See below on how to uninstall the keyboard while keeping the locale.</p>
<p>Alternatively, you can use the MKLC tool to select an unused language locale (e.g. “Latin (World)”). Build the setup package and install again.</p>
<h3 id="i-want-to-type-english-letters-at-the-same-time-multilingual">I want to type English letters at the same time (Multilingual)</h3>
<p>If you want to type both English and Esperanto letters without switching keyboards, you need to create a multilingual layout.</p>
<p>In the MKLC tool, you can assign the Esperanto letters to other keys (potentially in combination with modification keys, <code>Shift</code>, <code>Alt+Ctrl</code>, and <code>Ctrl</code>). (e.g. <code>Alt+Ctrl+s</code>→<code>ŝ</code>)</p>
<p>An implementation of the <code>Alt+Ctrl</code> solution for the “United States - English” keyboard can be found in the same author’s <a href="https://github.com/gellertb97/eo_INTL-Windows-Keyboard">another repository</a>.</p>
<h3 id="cant-installcant-build-dllhow-to-uninstall">Can’t install/Can’t build DLL/How to uninstall</h3>
<p>Sometimes, MLKC will complain that the keyboard is already in use on this machine. Or when installing, it says the <code>eo_US.dll</code> is already in the system folder. You need to first uninstall the keyboard and the DLL. Then build and install again.</p>
<p>The setup package, unfortunately, doesn’t come with an uninstallation program. The following is my best effort:</p>
<ol type="1">
<li>If you installed the keyboard under an unused locale, delete the locale.</li>
<li>Purge the keyboard’s registry entry.
<ul>
<li><strong>Backup your registry file</strong>.</li>
<li>With <code>Regedit</code>, navigate to <code>HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Control\Keyboard Layouts\</code>. You should find a list of layouts. The custom layout should have a large key number. For me, the normal layouts begin with <code>00</code>, and the custom layout begins with <code>a0</code>. Make sure that the <code>Layout Text</code> is <code>Esperanto (United States/Canada)</code> and the <code>Layout File</code> is <code>eo_US.dll</code> (or other values in accordance with your assignments).</li>
<li>Delete the custom layout entry.</li>
</ul></li>
<li>Delete the DLL file.
<ul>
<li>Find <code>eo_US.dll</code> file. The DLL file usually lives in <code>C:\\Windows\System32</code>. If you can’t find it, search through <code>System32</code>’s subfolders.</li>
<li>You might want to backup it first.</li>
<li>Delete it (this usually needs administrator privileges).</li>
</ul></li>
</ol>
<p>You might need to restart your computer to complete the uninstallation.</p>

        </div>
        </div>
        <div id="footer">
          <div class="inside">
            <p>
			网页使用 <a href="http://jaspervdj.be/hakyll">Hakyll</a> 生成<br />
			字体：中文 - 思源宋体, Serif - <a href="https://github.com/SorkinType/Merriweather">Merriweather</a>, Monospace - <a href="https://github.com/tonsky/FiraCode">FiraCode</a><br />
			主题改编自 The Professional， 设计者 <a href="http://twitter.com/katychuang">Dr. Kat</a><br />
            </p>
            <p class="copyright">
                所有内容均以 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a> 授权。非商用转载无需征得同意，注明出处即可。
            </p>
          </div>
        </div>
    </body>
</html>
